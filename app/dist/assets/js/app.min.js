mapboxgl.accessToken="pk.eyJ1IjoibWFyeXVzMzMiLCJhIjoiY2pzNGxpbGZrMDVzOTN5cGZ0Z3BxcTBlMSJ9.28m4YEQTF9M9I0hmCf2fyg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",center:[4.8320114,45.7578137],zoom:15}),urlAPI="http://localhost/projects/Talis-front/jcdecaux/api";function formSubmitPopup(e){e.preventDefault(),$.ajax({type:"POST",url:`${urlAPI}/index.php`,data:"test",success:function(e){console.log(e)}})}$.ajax({type:"GET",url:"https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=746c2436efd2e5b5f11781719551f0ae0f420594",success:function(e){e.forEach(function(e){var a=document.createElement("div");a.id="marker";var o=new mapboxgl.Popup({anchor:"top"}).setHTML(`\n            <div class="container">\n             <div class="row">\n                 <div class="col-6">\n                    <div class="imageVelo"></div>\n                 </div>\n                 <div class="col-6">\n                     <h2>${e.number}</h2>\n                     <p>${e.available_bikes} / ${e.bike_stands}</p>\n                 </div>\n             </div>\n                 <input class="reserveButton" type="submit" value="RESERVER">\n            </div>\n            `);new mapboxgl.Marker(a).setLngLat(e.position).setPopup(o).addTo(map)})},error:function(e){console.error()}}),$("span").click(function(){$("#mySidenav").toggleClass("moveSidenav"),$("#main").toggleClass("moveMain"),$(".mapboxgl-popup").toggleClass("movePopup")}),$("#formLogin").on("submit",function(e){e.preventDefault();const a=$(this).serialize();$.ajax({type:"post",url:`${urlAPI}/checkUser.php`,data:a,success:function(e){if(console.log(e),e=JSON.parse(e),console.log(e),e.username){$("#formLogin").hide(),$("#navbarVelo").show(),$("#map").show();var a=$("#map"),o=$(".mapboxgl-canvas");a.css("width","100%"),o.css("width","100%"),map.resize()}}})});
mapboxgl.accessToken="pk.eyJ1IjoibWFyeXVzMzMiLCJhIjoiY2pzNGxpbGZrMDVzOTN5cGZ0Z3BxcTBlMSJ9.28m4YEQTF9M9I0hmCf2fyg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",center:[4.8320114,45.7578137],zoom:15}),urlAPI="http://localhost/projects/Talis-front/jcdecaux/api";function formSubmitPopup(o){o.preventDefault(),$.ajax({type:"POST",url:`${urlAPI}/index.php`,data:"test",success:function(o){console.log(o)}})}$.ajax({type:"GET",url:"https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=746c2436efd2e5b5f11781719551f0ae0f420594",success:function(o){o.forEach(function(o){var e=document.createElement("div");e.id="marker";var a=new mapboxgl.Popup({anchor:"top"}).setHTML(`\n            <div class="container">\n             <div class="row">\n                 <div class="col-6">\n                    <div class="imageVelo"></div>\n                 </div>\n                 <div class="col-6">\n                     <h2>${o.number}</h2>\n                     <p>${o.available_bikes} / ${o.bike_stands}</p>\n                 </div>\n             </div>\n                 <input class="reserveButton" type="submit" value="RESERVER">\n            </div>\n            `);new mapboxgl.Marker(e).setLngLat(o.position).setPopup(a).addTo(map)})},error:function(o){console.error()}}),$("span").click(function(){$("#mySidenav").toggleClass("moveSidenav"),$("#main").toggleClass("moveMain"),$(".mapboxgl-popup").toggleClass("movePopup")}),$("button").click(function(){$("#formLogin").toggleClass("moveFormLogin"),$("#formSignup").toggleClass("moveFormSignup")}),$("#formLogin").on("submit",function(o){o.preventDefault();const e=$(this).serialize();$.ajax({type:"post",url:`${urlAPI}/checkUser.php`,data:e,success:function(o){if(console.log(o),o=JSON.parse(o),console.log(o),o.username&&o.password){$("#formLogin").hide(),$("#formSignup").hide(),$("button").hide(),$("#navbarVelo").show(),$("#map").show();var e=$("#map"),a=$(".mapboxgl-canvas");e.css("width","100%"),a.css("width","100%"),map.resize()}}})}),$("#formSignup").on("submit",function(o){o.preventDefault();const e=$(this).serialize();$.ajax({type:"post",url:`${urlAPI}/checkSignup.php`,data:e,success:function(o){if(console.log(o),o=JSON.parse(o),console.log(o),o.username&&o.password){$("#formSignup").hide(),$("#formLogin").hide(),$("#navbarVelo").show(),$("#map").show();var e=$("#map"),a=$(".mapboxgl-canvas");e.css("width","100%"),a.css("width","100%"),map.resize()}}})});
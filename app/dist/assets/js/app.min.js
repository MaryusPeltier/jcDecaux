mapboxgl.accessToken="pk.eyJ1IjoibWFyeXVzMzMiLCJhIjoiY2pzNGxpbGZrMDVzOTN5cGZ0Z3BxcTBlMSJ9.28m4YEQTF9M9I0hmCf2fyg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[4.8320114,45.7578137],zoom:12}),urlAPI="http://localhost/projects/Talis-front/jcdecaux/api";function formSubmitPopup(e){e.preventDefault(),$.ajax({type:"POST",url:`${urlAPI}/index.php`,data:"test",success:function(e){console.log(e)}})}function openNav(){document.getElementById("mySidenav").style.width="300px",document.getElementById("main").style.marginLeft="300px",document.getElementsByClassName("mapboxgl-popup-content").style.marginLeft="250px"}function closeNav(){document.getElementById("mySidenav").style.width="0",document.getElementById("main").style.marginLeft="0"}$.ajax({type:"GET",url:"https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=746c2436efd2e5b5f11781719551f0ae0f420594",success:function(e){e.forEach(function(e){var t=document.createElement("div");t.id="marker";var n=new mapboxgl.Popup({anchor:"top"}).setHTML(`\n            <h2>${e.number}</h2>\n            <p>${e.address}</p>\n            <input type="submit" value="RESERVER">\n            `);new mapboxgl.Marker(t).setLngLat(e.position).setPopup(n).addTo(map)})},error:function(e){console.error()}}),$("#formLogin").on("submit",function(e){e.preventDefault();const t=$(this).serialize();$.ajax({type:"post",url:`${urlAPI}/checkUser.php`,data:t,success:function(e){if(console.log(e),e=JSON.parse(e),console.log(e),e.username){$("#formLogin").hide(),$("#navbarVelo").show(),$("#map").show();var t=$("#map"),n=$(".mapboxgl-canvas");t.css("width","100%"),n.css("width","100%"),map.resize()}}})});